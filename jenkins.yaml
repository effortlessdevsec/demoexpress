pipeline:
 agent : any
 environment:
  defect_dojo: credentials('DEFECT_DOJO')
 stages:
  - stage: Checkout
    steps:
     - git 'https://github.com/effortlessdevsec/demoexpress.git'
  - stage : Build
    steps :  
     - echo 'building and installing all dependencies'
     - sh ' npm i '
  - stage : SAST
    parallel:
     - stage : SCA
       steps :
        - echo 'running sca scan'
        - sh '''ls '''
        - sh ''' snyk test "$(pwd)"  '''
     - stage : SCS
       steps:
         - echo 'running semgrep scan'
         - sh '''    semgrep --config "p/nodejsscan" "$(pwd)"  '''

 post:
   failed: error in pipeline
   always: 
     - echo "hello success pipeline"
    
     
  
         
       
